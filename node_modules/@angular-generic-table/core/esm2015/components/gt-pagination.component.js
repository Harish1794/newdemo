/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { GenericTableComponent } from './generic-table.component';
export class GtPaginationComponent {
    constructor() {
        this.ready = false;
    }
    /**
     * @return {?}
     */
    get genericTable() {
        return this._genericTable;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set genericTable(value) {
        if (value) {
            value.gtEvent.subscribe((res) => {
                if (res.name === 'gt-info' && res.value.pageTotal > 0) {
                    this.ready = true;
                }
            });
        }
        this._genericTable = value;
    }
}
GtPaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'gt-pagination',
                template: `<nav class="gt-pagination" aria-label="Table navigation" *ngIf="genericTable && genericTable.gtInfo && ready && genericTable.gtData?.length > 0" [ngClass]="{'no-data':genericTable.gtInfo.pageTotal === 0}">
  <ul class="pagination" [ngClass]="gtClasses">
    <li class="page-item" [ngClass]="{'disabled' : genericTable.gtInfo.pageCurrent === 1 || genericTable.loading }"><a class="page-link" href="javascript:void(0);" (click)="genericTable.gtInfo.pageCurrent > 1 && genericTable.previousPage()" [attr.aria-label]="genericTable.gtTexts.paginatePrevious"><span aria-hidden="true">&laquo;</span><span class="sr-only">{{genericTable.gtTexts.paginatePrevious}}</span></a></li>
    <li class="page-item" [ngClass]="{'disabled' : genericTable.loading && genericTable.gtInfo.pageCurrent !== page, 'active' : genericTable.gtInfo.pageCurrent === page }" *ngFor="let page of genericTable.gtInfo.pageTotal | gtPaginationPipe:genericTable.gtInfo.pageCurrent"><a class="page-link" [tabindex]="page === true ? -1:0" href="javascript:void(0);" (click)="page === true ? '':genericTable.goToPage(page)">{{page === true ? '&hellip;':page}}</a></li>
    <li class="page-item" [ngClass]="{'disabled' : genericTable.gtInfo.pageCurrent === genericTable.gtInfo.pageTotal || genericTable.loading }"><a class="page-link gt-link" href="javascript:void(0);" (click)="genericTable.gtInfo.pageCurrent !== genericTable.gtInfo.pageTotal && genericTable.nextPage()" [attr.aria-label]="genericTable.gtTexts.paginateNext"><span aria-hidden="true">&raquo;</span><span class="sr-only">{{genericTable.gtTexts.paginateNext}}</span></a></li>
  </ul>
  </nav>
    `,
                styles: ['.gt-link {cursor: pointer;}']
            },] },
];
/** @nocollapse */
GtPaginationComponent.propDecorators = {
    "genericTable": [{ type: Input },],
    "gtClasses": [{ type: Input },],
};
function GtPaginationComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    GtPaginationComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    GtPaginationComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    GtPaginationComponent.propDecorators;
    /** @type {?} */
    GtPaginationComponent.prototype._genericTable;
    /** @type {?} */
    GtPaginationComponent.prototype.gtClasses;
    /** @type {?} */
    GtPaginationComponent.prototype.ready;
}
import { Pipe } from '@angular/core';
export class PaginationPipe {
    /**
     * @param {?} totalPages
     * @param {?} currentPage
     * @return {?}
     */
    transform(totalPages, currentPage) {
        if (totalPages === 0) {
            return [1];
        }
        const /** @type {?} */ pagination = []; // create new empty array for pagination
        const /** @type {?} */ siblings = 2; // sibling elements ie. number of elements on each side of current page
        const /** @type {?} */ paginationLength = totalPages < siblings * 2 + 1 ? totalPages : siblings * 2 + 1; // number of elements in pagination array
        const /** @type {?} */ start = currentPage <= siblings ? 1 : currentPage - siblings; // starting position for array
        const /** @type {?} */ modifier = totalPages - (currentPage + siblings) <= 0
            ? totalPages - (currentPage + siblings)
            : 0; // modifier for pagination values
        const /** @type {?} */ modifiedPosition = start + modifier <= 0 ? 1 : start + modifier;
        // push pages to pagination array
        for (let /** @type {?} */ i = 0; i < paginationLength; i++) {
            pagination.push(modifiedPosition + i);
        }
        // if first page is not included in pagination...
        if (pagination.indexOf(1) === -1) {
            // ...check if second page is in pagination...
            if (pagination.indexOf(2) === -1) {
                // ...if not check if total number of pages equals seven and number of siblings are two...
                if (totalPages === 7 && siblings === 2) {
                    // ...add second page and don't convert page number to ellipsis
                    pagination.unshift(2);
                }
                else {
                    // ...if not, use this placeholder for ellipsis instead of actual page number
                    pagination[0] = true;
                }
            }
            // ...add first page as first array item
            pagination.unshift(1);
        }
        else if (totalPages > paginationLength) {
            // if first page is included add extra page to keep number of items consistent
            pagination.splice(paginationLength, 0, paginationLength + 1);
        }
        // check if last page is included in pagination...
        if (pagination.indexOf(totalPages) === -1) {
            // ...if not, page next to last should either show ellipsis or actual page number for the page
            pagination[pagination.length - 1] =
                pagination[pagination.length - 1] === totalPages - 1
                    ? totalPages - 1
                    : true;
            // ...add last page to pagination
            pagination.push(totalPages);
        }
        return pagination;
    }
}
PaginationPipe.decorators = [
    { type: Pipe, args: [{
                name: 'gtPaginationPipe'
            },] },
];
function PaginationPipe_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    PaginationPipe.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    PaginationPipe.ctorParameters;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3QtcGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYW5ndWxhci1nZW5lcmljLXRhYmxlL2NvcmUvIiwic291cmNlcyI6WyJjb21wb25lbnRzL2d0LXBhZ2luYXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQWNsRSxNQUFNOztxQkFtQlUsS0FBSzs7Ozs7SUFsQnBCLElBQUksWUFBWTtRQUNmLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztLQUMxQjs7Ozs7UUFHRyxZQUFZLENBQUMsS0FBc0M7UUFDdEQsSUFBSSxLQUFLLEVBQUU7WUFDVixLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQVEsRUFBRSxFQUFFO2dCQUNwQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssU0FBUyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRTtvQkFDdEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7aUJBQ2xCO2FBQ0QsQ0FBQyxDQUFDO1NBQ0g7UUFDRCxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQzs7OztZQTFCNUIsU0FBUyxTQUFDO2dCQUNWLFFBQVEsRUFBRSxlQUFlO2dCQUN6QixRQUFRLEVBQUU7Ozs7Ozs7S0FPTjtnQkFDSixNQUFNLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQzthQUN2Qzs7Ozs2QkFNQyxLQUFLOzBCQWFMLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHUCxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUtwRCxNQUFNOzs7Ozs7SUFDTCxTQUFTLENBQUMsVUFBa0IsRUFBRSxXQUFtQjtRQUNoRCxJQUFJLFVBQVUsS0FBSyxDQUFDLEVBQUU7WUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ1g7UUFDRCx1QkFBTSxVQUFVLEdBQWUsRUFBRSxDQUFDO1FBQ2xDLHVCQUFNLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbkIsdUJBQU0sZ0JBQWdCLEdBQ3JCLFVBQVUsR0FBRyxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMvRCx1QkFBTSxLQUFLLEdBQUcsV0FBVyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBQ25FLHVCQUFNLFFBQVEsR0FDYixVQUFVLEdBQUcsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQztZQUN6QyxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztZQUN2QyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ04sdUJBQU0sZ0JBQWdCLEdBQUcsS0FBSyxHQUFHLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQzs7UUFHdEUsS0FBSyxxQkFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMxQyxVQUFVLENBQUMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3RDOztRQUdELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTs7WUFFakMsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFOztnQkFFakMsSUFBSSxVQUFVLEtBQUssQ0FBQyxJQUFJLFFBQVEsS0FBSyxDQUFDLEVBQUU7O29CQUV2QyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUN0QjtxQkFBTTs7b0JBRU4sVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztpQkFDckI7YUFDRDs7WUFFRCxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RCO2FBQU0sSUFBSSxVQUFVLEdBQUcsZ0JBQWdCLEVBQUU7O1lBRXpDLFVBQVUsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzdEOztRQUVELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTs7WUFFMUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUNoQyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxVQUFVLEdBQUcsQ0FBQztvQkFDbkQsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDO29CQUNoQixDQUFDLENBQUMsSUFBSSxDQUFDOztZQUdULFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDNUI7UUFFRCxPQUFPLFVBQVUsQ0FBQztLQUNsQjs7O1lBeERELElBQUksU0FBQztnQkFDTCxJQUFJLEVBQUUsa0JBQWtCO2FBQ3hCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgR2VuZXJpY1RhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi9nZW5lcmljLXRhYmxlLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ2d0LXBhZ2luYXRpb24nLFxuXHR0ZW1wbGF0ZTogYDxuYXYgY2xhc3M9XCJndC1wYWdpbmF0aW9uXCIgYXJpYS1sYWJlbD1cIlRhYmxlIG5hdmlnYXRpb25cIiAqbmdJZj1cImdlbmVyaWNUYWJsZSAmJiBnZW5lcmljVGFibGUuZ3RJbmZvICYmIHJlYWR5ICYmIGdlbmVyaWNUYWJsZS5ndERhdGE/Lmxlbmd0aCA+IDBcIiBbbmdDbGFzc109XCJ7J25vLWRhdGEnOmdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZVRvdGFsID09PSAwfVwiPlxuICA8dWwgY2xhc3M9XCJwYWdpbmF0aW9uXCIgW25nQ2xhc3NdPVwiZ3RDbGFzc2VzXCI+XG4gICAgPGxpIGNsYXNzPVwicGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwieydkaXNhYmxlZCcgOiBnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VDdXJyZW50ID09PSAxIHx8IGdlbmVyaWNUYWJsZS5sb2FkaW5nIH1cIj48YSBjbGFzcz1cInBhZ2UtbGlua1wiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgKGNsaWNrKT1cImdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZUN1cnJlbnQgPiAxICYmIGdlbmVyaWNUYWJsZS5wcmV2aW91c1BhZ2UoKVwiIFthdHRyLmFyaWEtbGFiZWxdPVwiZ2VuZXJpY1RhYmxlLmd0VGV4dHMucGFnaW5hdGVQcmV2aW91c1wiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZsYXF1bzs8L3NwYW4+PHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+e3tnZW5lcmljVGFibGUuZ3RUZXh0cy5wYWdpbmF0ZVByZXZpb3VzfX08L3NwYW4+PC9hPjwvbGk+XG4gICAgPGxpIGNsYXNzPVwicGFnZS1pdGVtXCIgW25nQ2xhc3NdPVwieydkaXNhYmxlZCcgOiBnZW5lcmljVGFibGUubG9hZGluZyAmJiBnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VDdXJyZW50ICE9PSBwYWdlLCAnYWN0aXZlJyA6IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZUN1cnJlbnQgPT09IHBhZ2UgfVwiICpuZ0Zvcj1cImxldCBwYWdlIG9mIGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZVRvdGFsIHwgZ3RQYWdpbmF0aW9uUGlwZTpnZW5lcmljVGFibGUuZ3RJbmZvLnBhZ2VDdXJyZW50XCI+PGEgY2xhc3M9XCJwYWdlLWxpbmtcIiBbdGFiaW5kZXhdPVwicGFnZSA9PT0gdHJ1ZSA/IC0xOjBcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIChjbGljayk9XCJwYWdlID09PSB0cnVlID8gJyc6Z2VuZXJpY1RhYmxlLmdvVG9QYWdlKHBhZ2UpXCI+e3twYWdlID09PSB0cnVlID8gJyZoZWxsaXA7JzpwYWdlfX08L2E+PC9saT5cbiAgICA8bGkgY2xhc3M9XCJwYWdlLWl0ZW1cIiBbbmdDbGFzc109XCJ7J2Rpc2FibGVkJyA6IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZUN1cnJlbnQgPT09IGdlbmVyaWNUYWJsZS5ndEluZm8ucGFnZVRvdGFsIHx8IGdlbmVyaWNUYWJsZS5sb2FkaW5nIH1cIj48YSBjbGFzcz1cInBhZ2UtbGluayBndC1saW5rXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiAoY2xpY2spPVwiZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlQ3VycmVudCAhPT0gZ2VuZXJpY1RhYmxlLmd0SW5mby5wYWdlVG90YWwgJiYgZ2VuZXJpY1RhYmxlLm5leHRQYWdlKClcIiBbYXR0ci5hcmlhLWxhYmVsXT1cImdlbmVyaWNUYWJsZS5ndFRleHRzLnBhZ2luYXRlTmV4dFwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZyYXF1bzs8L3NwYW4+PHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+e3tnZW5lcmljVGFibGUuZ3RUZXh0cy5wYWdpbmF0ZU5leHR9fTwvc3Bhbj48L2E+PC9saT5cbiAgPC91bD5cbiAgPC9uYXY+XG4gICAgYCxcblx0c3R5bGVzOiBbJy5ndC1saW5rIHtjdXJzb3I6IHBvaW50ZXI7fSddXG59KVxuZXhwb3J0IGNsYXNzIEd0UGFnaW5hdGlvbkNvbXBvbmVudCB7XG5cdGdldCBnZW5lcmljVGFibGUoKTogR2VuZXJpY1RhYmxlQ29tcG9uZW50PGFueSwgYW55PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2dlbmVyaWNUYWJsZTtcblx0fVxuXG5cdEBJbnB1dCgpXG5cdHNldCBnZW5lcmljVGFibGUodmFsdWU6IEdlbmVyaWNUYWJsZUNvbXBvbmVudDxhbnksIGFueT4pIHtcblx0XHRpZiAodmFsdWUpIHtcblx0XHRcdHZhbHVlLmd0RXZlbnQuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xuXHRcdFx0XHRpZiAocmVzLm5hbWUgPT09ICdndC1pbmZvJyAmJiByZXMudmFsdWUucGFnZVRvdGFsID4gMCkge1xuXHRcdFx0XHRcdHRoaXMucmVhZHkgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dGhpcy5fZ2VuZXJpY1RhYmxlID0gdmFsdWU7XG5cdH1cblxuXHRwcml2YXRlIF9nZW5lcmljVGFibGU6IEdlbmVyaWNUYWJsZUNvbXBvbmVudDxhbnksIGFueT47XG5cdEBJbnB1dCgpIGd0Q2xhc3Nlczogc3RyaW5nO1xuXHRwdWJsaWMgcmVhZHkgPSBmYWxzZTtcbn1cbmltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQFBpcGUoe1xuXHRuYW1lOiAnZ3RQYWdpbmF0aW9uUGlwZSdcbn0pXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvblBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcblx0dHJhbnNmb3JtKHRvdGFsUGFnZXM6IG51bWJlciwgY3VycmVudFBhZ2U6IG51bWJlcik6IEFycmF5PGFueT4ge1xuXHRcdGlmICh0b3RhbFBhZ2VzID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gWzFdO1xuXHRcdH1cblx0XHRjb25zdCBwYWdpbmF0aW9uOiBBcnJheTxhbnk+ID0gW107IC8vIGNyZWF0ZSBuZXcgZW1wdHkgYXJyYXkgZm9yIHBhZ2luYXRpb25cblx0XHRjb25zdCBzaWJsaW5ncyA9IDI7IC8vIHNpYmxpbmcgZWxlbWVudHMgaWUuIG51bWJlciBvZiBlbGVtZW50cyBvbiBlYWNoIHNpZGUgb2YgY3VycmVudCBwYWdlXG5cdFx0Y29uc3QgcGFnaW5hdGlvbkxlbmd0aCA9XG5cdFx0XHR0b3RhbFBhZ2VzIDwgc2libGluZ3MgKiAyICsgMSA/IHRvdGFsUGFnZXMgOiBzaWJsaW5ncyAqIDIgKyAxOyAvLyBudW1iZXIgb2YgZWxlbWVudHMgaW4gcGFnaW5hdGlvbiBhcnJheVxuXHRcdGNvbnN0IHN0YXJ0ID0gY3VycmVudFBhZ2UgPD0gc2libGluZ3MgPyAxIDogY3VycmVudFBhZ2UgLSBzaWJsaW5nczsgLy8gc3RhcnRpbmcgcG9zaXRpb24gZm9yIGFycmF5XG5cdFx0Y29uc3QgbW9kaWZpZXIgPVxuXHRcdFx0dG90YWxQYWdlcyAtIChjdXJyZW50UGFnZSArIHNpYmxpbmdzKSA8PSAwXG5cdFx0XHRcdD8gdG90YWxQYWdlcyAtIChjdXJyZW50UGFnZSArIHNpYmxpbmdzKVxuXHRcdFx0XHQ6IDA7IC8vIG1vZGlmaWVyIGZvciBwYWdpbmF0aW9uIHZhbHVlc1xuXHRcdGNvbnN0IG1vZGlmaWVkUG9zaXRpb24gPSBzdGFydCArIG1vZGlmaWVyIDw9IDAgPyAxIDogc3RhcnQgKyBtb2RpZmllcjtcblxuXHRcdC8vIHB1c2ggcGFnZXMgdG8gcGFnaW5hdGlvbiBhcnJheVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcGFnaW5hdGlvbkxlbmd0aDsgaSsrKSB7XG5cdFx0XHRwYWdpbmF0aW9uLnB1c2gobW9kaWZpZWRQb3NpdGlvbiArIGkpO1xuXHRcdH1cblxuXHRcdC8vIGlmIGZpcnN0IHBhZ2UgaXMgbm90IGluY2x1ZGVkIGluIHBhZ2luYXRpb24uLi5cblx0XHRpZiAocGFnaW5hdGlvbi5pbmRleE9mKDEpID09PSAtMSkge1xuXHRcdFx0Ly8gLi4uY2hlY2sgaWYgc2Vjb25kIHBhZ2UgaXMgaW4gcGFnaW5hdGlvbi4uLlxuXHRcdFx0aWYgKHBhZ2luYXRpb24uaW5kZXhPZigyKSA9PT0gLTEpIHtcblx0XHRcdFx0Ly8gLi4uaWYgbm90IGNoZWNrIGlmIHRvdGFsIG51bWJlciBvZiBwYWdlcyBlcXVhbHMgc2V2ZW4gYW5kIG51bWJlciBvZiBzaWJsaW5ncyBhcmUgdHdvLi4uXG5cdFx0XHRcdGlmICh0b3RhbFBhZ2VzID09PSA3ICYmIHNpYmxpbmdzID09PSAyKSB7XG5cdFx0XHRcdFx0Ly8gLi4uYWRkIHNlY29uZCBwYWdlIGFuZCBkb24ndCBjb252ZXJ0IHBhZ2UgbnVtYmVyIHRvIGVsbGlwc2lzXG5cdFx0XHRcdFx0cGFnaW5hdGlvbi51bnNoaWZ0KDIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIC4uLmlmIG5vdCwgdXNlIHRoaXMgcGxhY2Vob2xkZXIgZm9yIGVsbGlwc2lzIGluc3RlYWQgb2YgYWN0dWFsIHBhZ2UgbnVtYmVyXG5cdFx0XHRcdFx0cGFnaW5hdGlvblswXSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIC4uLmFkZCBmaXJzdCBwYWdlIGFzIGZpcnN0IGFycmF5IGl0ZW1cblx0XHRcdHBhZ2luYXRpb24udW5zaGlmdCgxKTtcblx0XHR9IGVsc2UgaWYgKHRvdGFsUGFnZXMgPiBwYWdpbmF0aW9uTGVuZ3RoKSB7XG5cdFx0XHQvLyBpZiBmaXJzdCBwYWdlIGlzIGluY2x1ZGVkIGFkZCBleHRyYSBwYWdlIHRvIGtlZXAgbnVtYmVyIG9mIGl0ZW1zIGNvbnNpc3RlbnRcblx0XHRcdHBhZ2luYXRpb24uc3BsaWNlKHBhZ2luYXRpb25MZW5ndGgsIDAsIHBhZ2luYXRpb25MZW5ndGggKyAxKTtcblx0XHR9XG5cdFx0Ly8gY2hlY2sgaWYgbGFzdCBwYWdlIGlzIGluY2x1ZGVkIGluIHBhZ2luYXRpb24uLi5cblx0XHRpZiAocGFnaW5hdGlvbi5pbmRleE9mKHRvdGFsUGFnZXMpID09PSAtMSkge1xuXHRcdFx0Ly8gLi4uaWYgbm90LCBwYWdlIG5leHQgdG8gbGFzdCBzaG91bGQgZWl0aGVyIHNob3cgZWxsaXBzaXMgb3IgYWN0dWFsIHBhZ2UgbnVtYmVyIGZvciB0aGUgcGFnZVxuXHRcdFx0cGFnaW5hdGlvbltwYWdpbmF0aW9uLmxlbmd0aCAtIDFdID1cblx0XHRcdFx0cGFnaW5hdGlvbltwYWdpbmF0aW9uLmxlbmd0aCAtIDFdID09PSB0b3RhbFBhZ2VzIC0gMVxuXHRcdFx0XHRcdD8gdG90YWxQYWdlcyAtIDFcblx0XHRcdFx0XHQ6IHRydWU7XG5cblx0XHRcdC8vIC4uLmFkZCBsYXN0IHBhZ2UgdG8gcGFnaW5hdGlvblxuXHRcdFx0cGFnaW5hdGlvbi5wdXNoKHRvdGFsUGFnZXMpO1xuXHRcdH1cblxuXHRcdHJldHVybiBwYWdpbmF0aW9uO1xuXHR9XG59XG4iXX0=